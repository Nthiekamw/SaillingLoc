@page "{id:int}"
@model SaillingLoc.Pages.BoatDetailsModel
@{
    ViewData["Title"] = "Détails du bateau";
    Layout = "_Layout";
}

<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600&display=swap" rel="stylesheet" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">

<style>
    body {
        font-family: 'Montserrat', sans-serif;
        background-color: #f5f3ef;
        margin: 0;
        padding: 0;
    }

    .boat-details-container {
        max-width: 1400px;
        margin: 40px auto;
        padding: 0 20px;
    }

    .boat-details-row {
        display: flex;
        gap: 30px;
        align-items: flex-start;
    }

    .boat-image-section {
        flex: 0 0 60%;
    }

    .main-image {
        width: 100%;
        border-radius: 12px;
        overflow: hidden;
        margin-bottom: 15px;
    }

    .main-image img {
        width: 100%;
        height: auto;
        display: block;
    }

    .thumbnail {
        width: 80px;
        height: 60px;
        border-radius: 8px;
        overflow: hidden;
        cursor: pointer;
        border: 2px solid transparent;
    }

    .thumbnail:hover {
        border-color: #a67c52;
    }

    .thumbnail img {
        width: 100%;
        height: 100%;
        object-fit: cover;
    }

    .boat-info-section {
        flex: 0 0 35%;
        background-color: white;
        padding: 0;
    }

    .boat-title {
        font-size: 2rem;
        font-weight: 600;
        color: #1a1a1a;
        margin-bottom: 15px;
    }

    .boat-subtitle {
        font-size: 0.95rem;
        color: #666;
        margin-bottom: 10px;
    }

    .boat-price {
        font-size: 1.3rem;
        color: #a67c52;
        font-weight: 600;
        margin-bottom: 25px;
    }

    .boat-details-list {
        margin-bottom: 30px;
    }

    .boat-details-list p {
        font-size: 0.95rem;
        color: #333;
        margin: 8px 0;
        line-height: 1.6;
    }

    .boat-details-list strong {
        color: #1a1a1a;
        font-weight: 600;
    }

    .rent-button {
        width: 100%;
        background-color: #a67c52;
        color: white;
        border: none;
        padding: 15px;
        font-size: 1rem;
        font-weight: 600;
        border-radius: 8px;
        cursor: pointer;
        transition: background-color 0.3s;
    }

    .rent-button:hover {
        background-color: #8f6a44;
    }

    .description-section {
        margin-top: 40px;
    }

    .description-section h2 {
        font-size: 1.3rem;
        font-weight: 600;
        color: #1a1a1a;
        margin-bottom: 15px;
    }

    .description-section p {
        font-size: 0.95rem;
        color: #666;
        line-height: 1.6;
    }

    .equipements-section {
        margin-top: 40px;
    }

    .equipements-section h2 {
        font-size: 1.3rem;
        font-weight: 600;
        color: #1a1a1a;
        margin-bottom: 20px;
    }

    .equipements-grid {
        display: grid;
        grid-template-columns: repeat(4, 1fr);
        gap: 15px;
    }

    .equipement-item {
        display: flex;
        align-items: center;
        gap: 8px;
        font-size: 0.95rem;
        color: #333;
    }

    .equipement-item i {
        color: #5a7d9a;
        font-size: 1.1rem;
    }

    .back-link {
        display: inline-block;
        margin-top: 30px;
        color: #a67c52;
        text-decoration: none;
        font-weight: 600;
        font-size: 0.95rem;
    }

    .back-link:hover {
        text-decoration: underline;
    }


</style>

<div class="boat-details-container">
    @if (Model.Boat != null)
    {
        <div class="boat-details-row">
            <!-- Section Image -->
            <div class="boat-image-section">
                <div class="main-image">
                    @if (Model.Boat.Photos != null && Model.Boat.Photos.Any())
                    {
                        <img src="@Model.Boat.Photos.First().PhotoUrl" alt="@Model.Boat.Name" id="mainImage" />
                    }
                    else if (!string.IsNullOrEmpty(Model.Boat.Photo))
                    {
                        <img src="@Model.Boat.Photo" alt="@Model.Boat.Name" id="mainImage" />
                    }
                </div>

                @if (Model.Boat.Photos != null && Model.Boat.Photos.Count > 1)
                {
                    <div style="display: flex; gap: 10px;">
                        @foreach (var photo in Model.Boat.Photos.Take(4))
                        {
                            <div class="thumbnail" onclick="changeImage('@photo.PhotoUrl')">
                                <img src="@photo.PhotoUrl" alt="Miniature" />
                            </div>
                        }
                    </div>
                }
            </div>

            <!-- Section Informations -->
            <div class="boat-info-section">
                <h1 class="boat-title">@Model.Boat.Name</h1>
                <p class="boat-subtitle">
                    @(Model.Boat.BoatType?.Name ?? "Sea Ray") • Oceani 40 • 10.48 m
                </p>
                <p class="boat-price">@Model.Boat.DailyPrice.ToString("F2") € / jour</p>

                <div class="boat-details-list">
                    <p><strong>Port :</strong> @(Model.Boat.Port?.Name ?? "Port de Brest")</p>
                    <p><strong>Type :</strong> @(Model.Boat.BoatType?.Name ?? "Yacht")</p>
                    <p><strong>Capacité :</strong> 12 personnes</p>
                    <p><strong>Moteur :</strong> Volco penta 40 CV</p>
                    <p><strong>Skipper requis :</strong> Non</p>
                </div>

                <button class="rent-button">Louer maintenant</button>
            </div>
        </div>

        <!-- Section Description -->
        <div class="description-section">
            <h2>Description</h2>
            <p>@(Model.Boat.Description ?? "Magnifique bateaux")</p>
        </div>

        <!-- Section Équipements -->
        <div class="equipements-section">
            <h2>Équipements</h2>
            <div class="equipements-grid">
                <div class="equipement-item">
                    <i class="fas fa-check-circle"></i>
                    <span>Compas</span>
                </div>
                <div class="equipement-item">
                    <i class="fas fa-check-circle"></i>
                    <span>GPS / traceur</span>
                </div>
                <div class="equipement-item">
                    <i class="fas fa-check-circle"></i>
                    <span>Barbecue</span>
                </div>
                <div class="equipement-item">
                    <i class="fas fa-check-circle"></i>
                    <span>Ancre principale</span>
                </div>
                <div class="equipement-item">
                    <i class="fas fa-check-circle"></i>
                    <span>Ventilateurs</span>
                </div>
                <div class="equipement-item">
                    <i class="fas fa-check-circle"></i>
                    <span>Kayak</span>
                </div>
            </div>
        </div>

        <a asp-page="/Index" class="back-link">← Retour à la liste</a>
    }
    else
    {
        <p style="text-align: center; color: #e74c3c;">Bateau introuvable.</p>
        <a asp-page="/Index" class="back-link">← Retour à la liste</a>
    }
</div>

<script>
    function changeImage(url) {
        document.getElementById('mainImage').src = url;
    }
</script>