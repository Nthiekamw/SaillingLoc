@page
@model SaillingLoc.Pages.IndexModel
@{
    ViewData["Title"] = "Accueil";
}

<style>
    body {
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        margin: 0;
        padding: 0;
        color: #2c3e50;
        background-color: #f8f9fa;
    }

    /* Hero Section */
    .hero {
        position: relative;
        background: linear-gradient(rgba(0, 0, 0, 0.3), rgba(0, 0, 0, 0.3)), 
                    url('@Url.Content("~/images/Bateaux4.webp")') no-repeat center center/cover;
        color: white;
        text-align: center;
        padding: 120px 20px 80px;
        min-height: 600px;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
    }

    .hero h1 {
        font-size: 2.8em;
        font-weight: 700;
        margin-bottom: 20px;
        text-shadow: 2px 2px 8px rgba(0, 0, 0, 0.5);
        max-width: 900px;
        line-height: 1.3;
    }

    .hero p {
        font-size: 1.3em;
        margin-bottom: 30px;
        text-shadow: 1px 1px 4px rgba(0, 0, 0, 0.5);
    }

    .btn-primary-custom {
        background-color: #d4a574;
        color: white;
        border: none;
        padding: 14px 32px;
        font-size: 1.1rem;
        font-weight: 600;
        border-radius: 6px;
        cursor: pointer;
        transition: all 0.3s ease;
        text-decoration: none;
        display: inline-block;
    }

    .btn-primary-custom:hover {
        background-color: #c49563;
        transform: translateY(-2px);
        box-shadow: 0 4px 12px rgba(212, 165, 116, 0.4);
    }

    /* Search Box */
    .search-container {
        background: linear-gradient(135deg, #4a6b8a 0%, #5a7a99 100%);
        padding: 30px;
        border-radius: 12px;
        max-width: 700px;
        width: 90%;
        margin: 30px auto 0;
        box-shadow: 0 8px 24px rgba(0, 0, 0, 0.2);
    }

    .search-container form {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 15px;
    }

    .search-container label {
        color: white;
        font-weight: 600;
        font-size: 0.95rem;
        margin-bottom: 5px;
        display: block;
    }

    .search-container input {
        padding: 12px;
        border-radius: 6px;
        border: none;
        font-size: 1rem;
        width: 100%;
        box-sizing: border-box;
    }

    .search-container button {
        grid-column: 1 / -1;
        background-color: #d4a574;
        color: white;
        border: none;
        padding: 14px;
        border-radius: 6px;
        cursor: pointer;
        font-weight: 700;
        font-size: 1.1rem;
        transition: all 0.3s ease;
    }

    .search-container button:hover {
        background-color: #c49563;
        transform: translateY(-1px);
    }

    /* About Section */
    .about-section {
        display: flex;
        align-items: center;
        gap: 40px;
        padding: 80px 40px;
        max-width: 1200px;
        margin: 0 auto;
        background-color: white;
    }

    .about-section > div:first-child {
        flex: 1;
    }

    .about-section h2 {
        font-size: 2.5em;
        font-weight: 700;
        color: #2c3e50;
        margin-bottom: 20px;
    }

    .about-section p {
        font-size: 1.1em;
        line-height: 1.7;
        color: #555;
        margin-bottom: 15px;
    }

    .about-label {
        color: #d4a574;
        font-weight: 600;
        font-size: 0.95rem;
        text-transform: uppercase;
        letter-spacing: 1px;
        margin-bottom: 10px;
    }

    .slider-container {
        flex: 1;
        max-width: 500px;
    }

    .slider-container img {
        width: 100%;
        border-radius: 12px;
        box-shadow: 0 8px 24px rgba(0, 0, 0, 0.15);
    }

    /* Section Title */
    .section-title {
        text-align: center;
        font-size: 2.5em;
        font-weight: 700;
        color: #2c3e50;
        margin: 60px 0 40px;
    }

    .section-subtitle {
        text-align: center;
        color: #d4a574;
        font-weight: 600;
        font-size: 0.95rem;
        text-transform: uppercase;
        letter-spacing: 1px;
        margin-bottom: 10px;
    }

    /* Boat Types */
    .boat-types-section {
        background-color: #f8f9fa;
        padding: 60px 20px;
    }

    .boat-types {
        display: flex;
        justify-content: center;
        gap: 25px;
        flex-wrap: wrap;
        max-width: 1200px;
        margin: 0 auto;
    }

    .boat-type-card {
        background: white;
        padding: 20px;
        border-radius: 12px;
        text-align: center;
        width: 180px;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
        transition: all 0.3s ease;
        text-decoration: none;
        color: inherit;
        display: block;
    }

    .boat-type-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 8px 20px rgba(0, 0, 0, 0.15);
    }

    .boat-type-card img {
        width: 100%;
        height: 140px;
        object-fit: cover;
        border-radius: 8px;
        margin-bottom: 12px;
    }

    .boat-type-card .label {
        font-weight: 600;
        font-size: 1.1rem;
        color: #2c3e50;
    }

    /* Offers */
    .offers {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
        gap: 30px;
        padding: 40px;
        max-width: 1200px;
        margin: 0 auto;
    }

    .offer-card {
        background: white;
        border-radius: 12px;
        overflow: hidden;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
        transition: all 0.3s ease;
    }

    .offer-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 8px 24px rgba(0, 0, 0, 0.15);
    }

    .offer-card img {
        width: 100%;
        height: 200px;
        object-fit: cover;
    }

    .offer-card .content {
        padding: 20px;
    }

    .offer-card h3 {
        font-size: 1.4rem;
        font-weight: 700;
        color: #2c3e50;
        margin-bottom: 10px;
    }

    .offer-card p {
        color: #666;
        margin-bottom: 8px;
        font-size: 1rem;
    }

    .offer-card .price {
        font-size: 1.3rem;
        font-weight: 700;
        color: #d4a574;
        margin-bottom: 15px;
    }

    .btn-view, .btn-reserve {
        display: inline-block;
        padding: 10px 20px;
        border-radius: 6px;
        text-decoration: none;
        font-weight: 600;
        font-size: 0.95rem;
        transition: all 0.3s ease;
        margin: 5px 5px 5px 0;
    }

    .btn-view {
        background-color: #d4a574;
        color: white;
    }

    .btn-view:hover {
        background-color: #c49563;
    }

    .btn-reserve {
        background-color: white;
        border: 2px solid #d4a574;
        color: #d4a574;
    }

    .btn-reserve:hover {
        background-color: #d4a574;
        color: white;
    }

    /* Features Section */
    .features-section {
        background: linear-gradient(135deg, #c1d0c4 0%, #d4e0d7 100%);
        padding: 80px 40px;
    }

    .features {
        max-width: 1200px;
        margin: 0 auto;
    }

    .features-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 40px;
        margin-top: 50px;
    }

    .feature-card {
        text-align: center;
        padding: 30px;
    }

    .icon-circle {
        width: 100px;
        height: 100px;
        margin: 0 auto 20px;
        border-radius: 50%;
        display: flex;
        justify-content: center;
        align-items: center;
        box-shadow: 0 6px 16px rgba(0, 0, 0, 0.15);
        transition: all 0.3s ease;
    }

    .icon-circle:hover {
        transform: scale(1.05);
    }

    .anchor-icon {
        background-color: #5a7a99;
        color: white;
    }

    .calendar-icon {
        background-color: #28a745;
        color: white;
    }

    .ship-icon {
        background-color: #ffc107;
        color: white;
    }

    .feature-card h4 {
        font-size: 1.5rem;
        font-weight: 700;
        color: #2c3e50;
        margin-bottom: 15px;
    }

    .feature-card p {
        font-size: 1.05rem;
        line-height: 1.6;
        color: #555;
    }

    /* Testimonials */
    .testimonials-section {
        background-color: #f8f9fa;
        padding: 80px 40px;
    }

    .testimonials-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 30px;
        max-width: 1200px;
        margin: 50px auto 0;
    }

    .testimonial {
        background: white;
        border-radius: 12px;
        padding: 30px;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
        position: relative;
        transition: all 0.3s ease;
    }

    .testimonial:hover {
        transform: translateY(-3px);
        box-shadow: 0 8px 20px rgba(0, 0, 0, 0.12);
    }

    .testimonial .user-icon {
        position: absolute;
        top: -15px;
        left: 30px;
        font-size: 30px;
        color: #5a7a99;
        background: white;
        padding: 5px 10px;
        border-radius: 50%;
    }

    .testimonial p {
        font-size: 1.05rem;
        line-height: 1.7;
        color: #555;
        margin-top: 20px;
        font-style: italic;
    }

    .author {
        font-weight: 700;
        color: #2c3e50;
        margin-top: 15px;
        font-style: normal;
    }

    .author span {
        color: #ffc107;
        margin-left: 5px;
    }

    /* Rent Section */
    .rent-section {
        background: linear-gradient(135deg, #e8e5df 0%, #f5f1eb 100%);
        padding: 80px 40px;
        text-align: center;
    }

    .rent-section p:first-child {
        color: #d4a574;
        font-weight: 600;
        font-size: 0.95rem;
        text-transform: uppercase;
        letter-spacing: 1px;
        margin-bottom: 15px;
    }

    .rent-section .section-title {
        margin: 0 0 20px;
    }

    .rent-section > p {
        max-width: 700px;
        margin: 0 auto 30px;
        font-size: 1.1rem;
        line-height: 1.7;
        color: #555;
    }

    /* Map Section */
    .map-section {
        padding: 60px 40px;
        background-color: white;
    }

    .map-section h3 {
        text-align: center;
        font-size: 2rem;
        font-weight: 700;
        color: #2c3e50;
        margin-bottom: 30px;
    }

    #map {
        width: 100%;
        max-width: 1200px;
        height: 450px;
        margin: 0 auto;
        border-radius: 12px;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    }

    
</style>

<!-- Hero Section -->
<section class="hero">
    <h1>Trouvez le bateau parfait pour votre prochaine aventure</h1>
    <p>Explorez les plus belles destinations en mer</p>
    <button class="btn-primary-custom">Commencez votre aventure</button>

    <div class="search-container">
        <form method="get">
            <div>
                <label for="Destination">Destination</label>
                <input type="text" id="Destination" name="Destination" 
                       placeholder="Où voulez-vous naviguer ?" 
                       value="@Model.searchDestination" />
            </div>

            <div>
                <label for="NumberOfPeople">Nombre de places</label>
                <input type="number" id="NumberOfPeople" name="NumberOfPeople" 
                       placeholder="Personnes" min="1" 
                       value="@(Model.searchNumberOfPeople ?? 0)" />
            </div>

            <div>
                <label for="StartDate">Date de départ</label>
                <input type="date" id="StartDate" name="StartDate" 
                       value="@(Model.searchStartDate?.ToString("yyyy-MM-dd"))" />
            </div>

            <div>
                <label for="EndDate">Date de retour</label>
                <input type="date" id="EndDate" name="EndDate" 
                       value="@(Model.searchEndDate?.ToString("yyyy-MM-dd"))" />
            </div>

            <button type="submit">Rechercher</button>
        </form>
    </div>
</section>

<!-- About Section -->
<section class="about-section">
    <div>
        <p class="about-label">À propos de SailingLoc</p>
        <h2>Naviguez librement</h2>
        <p>Chez SailingLoc, nous mettons en relation les amoureux de la mer pour faciliter la location de voiliers et bateaux à moteur entre particuliers.</p>
        <p>Que vous soyez marin expérimenté ou aventurier en quête de découverte, notre plateforme vous offre une expérience simple, sécurisée et conviviale. Découvrez une nouvelle façon de naviguer, avec une communauté qui partage la même passion.</p>
        <button class="btn-primary-custom" style="margin-top: 20px;">En savoir plus</button>
    </div>

    <div class="slider-container">
        <div id="slider">
            <img src="@Url.Content("~/images/Bateaux 7.webp")" alt="Image Slider" />
        </div>
    </div>
</section>

<script>
    const images = [
        '@Url.Content("~/images/Bateaux 7.webp")',
        '@Url.Content("~/images/yatch.webp")',
        '@Url.Content("~/images/pic-1-1.jpeg")'
    ];

    const slider = document.getElementById('slider').querySelector('img');
    let index = 0;

    setInterval(() => {
        index = (index + 1) % images.length;
        slider.src = images[index];
    }, 4000);
</script>

<!-- Map Section -->
<section class="map-section">
    <h3>Localisation des bateaux</h3>
    <div id="map"></div>
</section>

<script>
    function initMap() {
        const center = { lat: 48.8566, lng: 2.3522 };

        const map = new google.maps.Map(document.getElementById("map"), {
            zoom: 5,
            center: center,
        });

        const boats = [
            @foreach (var boat in Model.Boats)
            {
                if (boat.Latitude != 0 && boat.Longitude != 0)
                {
                    var photo = boat.Photos?.FirstOrDefault()?.PhotoUrl ?? "";
                    var portName = boat.Port?.Name ?? "Port inconnu";
                    var typeName = boat.BoatType?.Name ?? "Type inconnu";

                    <text>
                    {
                        lat: @boat.Latitude,
                        lng: @boat.Longitude,
                        name: "@boat.Name",
                        port: "@portName",
                        type: "@typeName",
                        photo: "@Url.Content($"~/uploads/{photo}")"
                    },
                    </text>
                }
            }
        ];

        boats.forEach(boat => {
            const marker = new google.maps.Marker({
                position: { lat: boat.lat, lng: boat.lng },
                map: map,
                title: boat.name
            });

            const contentString = `
                <div style="max-width: 250px;">
                    <h4>${boat.name}</h4>
                    <p><strong>Port:</strong> ${boat.port}</p>
                    <p><strong>Type:</strong> ${boat.type}</p>
                    ${boat.photo ? `<img src="${boat.photo}" alt="Photo bateau" style="width: 100%; height: auto; border-radius: 8px;" />` : ""}
                </div>
            `;

            const infowindow = new google.maps.InfoWindow({
                content: contentString
            });

            marker.addListener("click", () => {
                infowindow.open(map, marker);
            });
        });
    }
</script>

<script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAv5i7Pcfoy7KGhEo3bs_NpVhxPj9JaUJs&callback=initMap"></script>

<!-- Boat Types Section -->
<section class="boat-types-section">
    <p class="section-subtitle">Nos catégories</p>
    <h2 class="section-title">Trouvez le bateau qui vous correspond</h2>
    
    <div class="boat-types">
        <a href="https://example.com/listebateaux?type=Pic" class="boat-type-card">
            <img src="/images/pic-1-1.jpeg" alt="Pic" />
            <div class="label">Pic</div>
        </a>

        <a href="https://example.com/listebateaux?type=Moteur" class="boat-type-card">
            <img src="/images/bateaux%20moteur.jpg" alt="Bateau à moteur" />
            <div class="label">Moteur</div>
        </a>

        <a href="https://example.com/listebateaux?type=Catamaran" class="boat-type-card">
            <img src="/images/catamaran.webp" alt="Catamaran" />
            <div class="label">Catamaran</div>
        </a>

        <a href="https://example.com/listebateaux?type=Yacht" class="boat-type-card">
            <img src="/images/yatch.webp" alt="Yacht" />
            <div class="label">Yacht</div>
        </a>

        <a href="https://example.com/listebateaux?type=Ferry" class="boat-type-card">
            <img src="/images/ferry.jpg" alt="Ferry" />
            <div class="label">Ferry</div>
        </a>
    </div>
</section>

<!-- Offers Section -->
<section id="mes-bateaux">
    <p class="section-subtitle">Nos offres</p>
    <h2 class="section-title">Découvrez nos meilleures offres</h2>

    <div class="offers">
        @if (Model.Boats != null && Model.Boats.Any())
        {
            foreach (var boat in Model.Boats)
            {
                var photoUrl = (boat.Photo != null) 
                    ? Url.Content(boat.Photo)
                    : Url.Content("~/images/default-boat.jpg");

                <div class="offer-card">
                    <img src="@photoUrl" alt="Photo de @boat.Name" />

                    <div class="content">
                        <h3>@boat.Name</h3>
                        <p class="price">@boat.DailyPrice € / jour</p>
                        <p>📍 @boat.Port?.Name</p>

                        <div>
                            <a asp-page="/BoatDetails" asp-route-id="@boat.Id" class="btn-view">Voir l'annonce</a>
                            <a asp-page="/ReserveBoat" asp-route-id="@boat.Id" class="btn-reserve">Réserver</a>
                        </div>

                        @if (Model.IsAdmin || (Model.IsProprietaire && boat.OwnerId == Model.CurrentUserId))
                        {
                            <div style="margin-top: 10px;">
                                <a asp-page="/EditBoat" asp-route-id="@boat.Id" class="btn-view" style="background-color: #28a745; font-size: 0.9rem; padding: 8px 15px;">Modifier</a>

                                <form method="post" asp-page-handler="Delete" asp-route-id="@boat.Id" style="display:inline" onsubmit="return confirm('Voulez-vous vraiment supprimer cette annonce ?');">
                                    <button type="submit" class="btn-view" style="background-color: #dc3545; font-size: 0.9rem; padding: 8px 15px;">Supprimer</button>
                                </form>
                            </div>
                        }
                    </div>
                </div>
            }
        }
        else
        {
            <p style="grid-column: 1 / -1; text-align: center; color: #666;">Aucune offre de bateau disponible pour le moment.</p>
        }
    </div>

    @if (User.IsInRole("Admin") || User.IsInRole("Proprietaire"))
    {
        <div style="text-align: center; margin: 40px 0;">
            <a href="@Url.Content("~/Ajoutbat")" class="btn-primary-custom">
                Ajouter une annonce
            </a>
        </div>
    }
</section>

<!-- Features Section -->
<section class="features-section">
    <div class="features">
        <p class="section-subtitle" style="color: #2c3e50;">Le processus</p>
        <h2 class="section-title" style="margin: 10px 0 20px;">Simple, rapide et sécurisé</h2>
        <p style="text-align: center; font-size: 1.05rem; color: #555; margin-bottom: 20px;">Louer votre bateau en 3 étapes</p>

        <div class="features-grid">
            <div class="feature-card">
                <div class="icon-circle anchor-icon">
                    <i class="fas fa-anchor fa-3x"></i>
                </div>
                <h4>Choisir votre bateau</h4>
                <p>Parcourez notre sélection et trouvez le bateau idéal selon vos besoins : voilier, catamaran, bateau à moteur…</p>
            </div>

            <div class="feature-card">
                <div class="icon-circle calendar-icon">
                    <i class="fas fa-calendar-check fa-3x"></i>
                </div>
                <h4>Réserver en ligne</h4>
                <p>Sélectionnez vos dates, ajoutez les options souhaitées et effectuez votre paiement en toute sécurité.</p>
            </div>

            <div class="feature-card">
                <div class="icon-circle ship-icon">
                    <i class="fas fa-ship fa-3x"></i>
                </div>
                <h4>Embarquez et profitez</h4>
                <p>Rendez-vous au port, récupérez votre bateau et vivez une expérience inoubliable sur l'eau !</p>
            </div>
        </div>

        <p style="text-align: center; margin-top: 30px; font-size: 1.05rem; color: #555;">
            Si vous n'avez jamais loué un bateau auparavant, nous vous guiderons à chaque étape du processus.
        </p>
    </div>
</section>

<!-- Testimonials Section -->
<section class="testimonials-section">
    <p class="section-subtitle">Témoignages</p>
    <h2 class="section-title">Des expériences inoubliables en mer</h2>
    <p style="text-align: center; font-size: 1.05rem; color: #666; max-width: 700px; margin: 0 auto 20px;">
        Ce que nos navigateurs disent de nous
    </p>

    <div class="testimonials-grid">
        <div class="testimonial">
            <i class="fas fa-user user-icon"></i>
            <p>"Louer un voilier via SailingLoc a été une expérience incroyable. Le bateau était en excellent état, et le processus de réservation était fluide. Nous avons passé une semaine magique à explorer la côte méditerranéenne. Je recommande vivement !"</p>
            <div class="author">Marc L. <span>★★★★★</span></div>
        </div>

        <div class="testimonial">
            <i class="fas fa-user user-icon"></i>
            <p>Nous avons loué un catamaran pour un week-end entre amis, et tout était parfait ! L'équipe de SailingLoc nous a accompagnés à chaque étape, et le bateau était spacieux et confortable. Une expérience à refaire !</p>
            <div class="author">Sophie D. <span>★★★★★</span></div>
        </div>

        <div class="testimonial">
            <i class="fas fa-user user-icon"></i>
            <p>"C'était ma première location de bateau, et SailingLoc m'a vraiment facilité la tâche. Le site est intuitif, et j'ai trouvé exactement ce que je cherchais en quelques clics. Le bateau était conforme à la description, et la prise en main s'est faite sans souci."</p>
            <div class="author">Julien R. <span>★★★★★</span></div>
        </div>
    </div>
</section>

<!-- Rent Section -->
<section class="rent-section">
    <p>Devenez propriétaire sur SailingLoc</p>
    <h2 class="section-title">Rentabilisez votre bateau en toute simplicité</h2>
    <p>Mettez votre bateau en location et rejoignez une communauté de passionnés. SailingLoc vous permet de gérer vos disponibilités, sécuriser vos transactions et maximiser vos revenus en toute sérénité.</p>
    <a href="@Url.Content("~/Ajoutbat")">
        <button class="btn-primary-custom">Enregistrer votre bateau</button>
    </a>
</section>